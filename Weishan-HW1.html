<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Weishan Jiang">

<title>Weishan-HW1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Weishan-HW1_files/libs/clipboard/clipboard.min.js"></script>
<script src="Weishan-HW1_files/libs/quarto-html/quarto.js"></script>
<script src="Weishan-HW1_files/libs/quarto-html/popper.min.js"></script>
<script src="Weishan-HW1_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Weishan-HW1_files/libs/quarto-html/anchor.min.js"></script>
<link href="Weishan-HW1_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Weishan-HW1_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Weishan-HW1_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Weishan-HW1_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Weishan-HW1_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Weishan-HW1</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Weishan Jiang </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<p>Turn in this assignment as an HTML or PDF file to ELMS. Make sure to include the R Markdown or Quarto file that was used to generate it. You should include the questions in your solutions. You may use the qmd file of the assignment provided to insert your answers.</p>
<section id="git-and-github" class="level2">
<h2 class="anchored" data-anchor-id="git-and-github">Git and GitHub</h2>
<section id="provide-the-link-to-the-github-repo-that-you-used-to-practice-git-from-week-1.-it-should-have" class="level4">
<h4 class="anchored" data-anchor-id="provide-the-link-to-the-github-repo-that-you-used-to-practice-git-from-week-1.-it-should-have">1) Provide the link to the GitHub repo that you used to practice git from Week 1. It should have:</h4>
<ul>
<li><p>Your name on the README file.</p></li>
<li><p>At least one commit with your name, with a description of what you did in that commit.</p></li>
<li><p><a href="https://github.com/Caroljiang06/727-seven-pairs.git" class="uri">https://github.com/Caroljiang06/727-seven-pairs.git</a></p></li>
</ul>
</section>
</section>
<section id="reading-data" class="level2">
<h2 class="anchored" data-anchor-id="reading-data">Reading Data</h2>
<p>Download both the Angell.dta (Stata data format) dataset and the Angell.txt dataset from this website: <a href="https://stats.idre.ucla.edu/stata/examples/ara/applied-regression-analysis-by-fox-data-files/" class="uri">https://stats.idre.ucla.edu/stata/examples/ara/applied-regression-analysis-by-fox-data-files/</a></p>
<section id="read-in-the-.dta-version-and-store-in-an-object-called-angell_stata." class="level4">
<h4 class="anchored" data-anchor-id="read-in-the-.dta-version-and-store-in-an-object-called-angell_stata.">2) Read in the .dta version and store in an object called <code>angell_stata</code>.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">repos =</span> <span class="fu">c</span>(<span class="at">CRAN =</span> <span class="st">"https://cloud.r-project.org"</span>))</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>angell_stata <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">"angell.dta"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="read-in-the-.txt-version-and-store-it-in-an-object-called-angell_txt." class="level4">
<h4 class="anchored" data-anchor-id="read-in-the-.txt-version-and-store-it-in-an-object-called-angell_txt.">3) Read in the .txt version and store it in an object called <code>angell_txt</code>.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>angell_txt <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"Angell.txt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="what-are-the-differences-between-angell_stata-and-angell_txt-are-there-differences-in-the-classes-of-the-individual-columns" class="level4">
<h4 class="anchored" data-anchor-id="what-are-the-differences-between-angell_stata-and-angell_txt-are-there-differences-in-the-classes-of-the-individual-columns">4) What are the differences between <code>angell_stata</code> and <code>angell_txt</code>? Are there differences in the classes of the individual columns?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">sapply</span>(angell_stata,class))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       city      morint      ethhet      geomob      region 
"character"   "numeric"   "numeric"   "numeric" "character" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">sapply</span>(angell_txt,class))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         V1          V2          V3          V4          V5 
"character"   "numeric"   "numeric"   "numeric" "character" </code></pre>
</div>
</div>
<ul>
<li>The column names of this two data sets are different. The classes between columns are different, which are numeric and character</li>
</ul>
</section>
<section id="make-any-updates-necessary-so-that-angell_txt-is-the-same-as-angell_stata." class="level4">
<h4 class="anchored" data-anchor-id="make-any-updates-necessary-so-that-angell_txt-is-the-same-as-angell_stata.">5) Make any updates necessary so that <code>angell_txt</code> is the same as <code>angell_stata</code>.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plyr)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>angell_txt <span class="ot">&lt;-</span> plyr<span class="sc">::</span><span class="fu">rename</span> (angell_txt, <span class="fu">c</span>(<span class="st">"V1"</span><span class="ot">=</span><span class="st">"city"</span>,<span class="st">"V2"</span> <span class="ot">=</span> <span class="st">"morint"</span>, <span class="st">"V3"</span> <span class="ot">=</span> <span class="st">"ethhe"</span>, <span class="st">"V4"</span> <span class="ot">=</span><span class="st">"geomob"</span>, <span class="st">"V5"</span> <span class="ot">=</span> <span class="st">"region"</span> ))</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">class</span>(angell_txt) <span class="sc">==</span> <span class="fu">class</span>(angell_stata))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE  TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>angell_txt <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(angell_txt)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">class</span>(angell_txt) <span class="sc">==</span> <span class="fu">class</span>(angell_stata))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE TRUE TRUE</code></pre>
</div>
</div>
<ul>
<li>After converting the column names and the type of <code>angell_txt</code> to match those of <code>angell_stata</code> , <code>angell_txt</code> is the same as <code>angell_stata</code></li>
</ul>
</section>
<section id="describe-the-ethnic-heterogeneity-variable.-use-descriptive-statistics-such-as-mean-median-standard-deviation-etc.-how-does-it-differ-by-region" class="level4">
<h4 class="anchored" data-anchor-id="describe-the-ethnic-heterogeneity-variable.-use-descriptive-statistics-such-as-mean-median-standard-deviation-etc.-how-does-it-differ-by-region">6) Describe the Ethnic Heterogeneity variable. Use descriptive statistics such as mean, median, standard deviation, etc. How does it differ by region?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>eh_1 <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(ethhet <span class="sc">~</span> region, angell_stata, <span class="at">FUN =</span> mean)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>eh_2 <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(ethhet <span class="sc">~</span> region, angell_stata, <span class="at">FUN =</span> sd)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>eh_3<span class="ot">&lt;-</span> <span class="fu">aggregate</span>(ethhet <span class="sc">~</span> region, angell_stata, <span class="at">FUN =</span> median)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>eh_4 <span class="ot">&lt;-</span> <span class="fu">merge</span>(eh_1, eh_2, <span class="at">by =</span> <span class="st">"region"</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(eh_1, eh_2)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>eh_5 <span class="ot">&lt;-</span> <span class="fu">merge</span>(eh_3, eh_4, <span class="at">by =</span> <span class="st">"region"</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(eh_3, eh_4)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>plyr<span class="sc">::</span><span class="fu">rename</span>(eh_5, <span class="fu">c</span>(<span class="st">"ethhet"</span><span class="ot">=</span><span class="st">"mean"</span>,<span class="st">"ethhet.x"</span><span class="ot">=</span><span class="st">"sd"</span>,<span class="st">"ethhet.y"</span><span class="ot">=</span><span class="st">"median"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  region  mean       sd    median
1      E 22.10 23.48889 10.773398
2     MW 19.25 21.67857  9.084914
3      S 53.80 52.48571 21.440897
4      W 16.15 16.55000  4.164012</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(eh_5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>From the table above, the S region has the highest mean, standard deviation and median among the 4 regions, while the W region has the lowest standard deviation and median.</p>
</section>
</section>
<section id="describing-data" class="level2">
<h2 class="anchored" data-anchor-id="describing-data">Describing Data</h2>
<p>R comes also with many built-in datasets. The “MASS” package, for example, comes with the “Boston” dataset.</p>
<section id="install-the-mass-package-load-the-package.-then-load-the-boston-dataset." class="level4">
<h4 class="anchored" data-anchor-id="install-the-mass-package-load-the-package.-then-load-the-boston-dataset.">7) Install the “MASS” package, load the package. Then, load the Boston dataset.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"MASS"</span>, <span class="at">repos =</span> <span class="st">"https://cran.rstudio.com/"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
The downloaded binary packages are in
    /var/folders/j1/xvfjxggx4jsbvlm6fzlxhw_w0000gn/T//RtmpDYGrMI/downloaded_packages</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"MASS"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
The downloaded binary packages are in
    /var/folders/j1/xvfjxggx4jsbvlm6fzlxhw_w0000gn/T//RtmpDYGrMI/downloaded_packages</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MASS)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"Boston"</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(Boston)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     crim zn indus chas   nox    rm  age    dis rad tax ptratio  black lstat
1 0.00632 18  2.31    0 0.538 6.575 65.2 4.0900   1 296    15.3 396.90  4.98
2 0.02731  0  7.07    0 0.469 6.421 78.9 4.9671   2 242    17.8 396.90  9.14
3 0.02729  0  7.07    0 0.469 7.185 61.1 4.9671   2 242    17.8 392.83  4.03
4 0.03237  0  2.18    0 0.458 6.998 45.8 6.0622   3 222    18.7 394.63  2.94
5 0.06905  0  2.18    0 0.458 7.147 54.2 6.0622   3 222    18.7 396.90  5.33
6 0.02985  0  2.18    0 0.458 6.430 58.7 6.0622   3 222    18.7 394.12  5.21
  medv
1 24.0
2 21.6
3 34.7
4 33.4
5 36.2
6 28.7</code></pre>
</div>
</div>
</section>
<section id="what-is-the-type-of-the-boston-object" class="level4">
<h4 class="anchored" data-anchor-id="what-is-the-type-of-the-boston-object">8) What is the type of the Boston object?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(Boston)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "list"</code></pre>
</div>
</div>
<ul>
<li>The type of Boston object is “list”</li>
</ul>
</section>
<section id="what-is-the-class-of-the-boston-object" class="level4">
<h4 class="anchored" data-anchor-id="what-is-the-class-of-the-boston-object">9) What is the class of the Boston object?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(Boston)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
</div>
<ul>
<li>The class of Boston object is “data frame”</li>
</ul>
</section>
<section id="how-many-of-the-suburbs-in-the-boston-data-set-bound-the-charles-river" class="level4">
<h4 class="anchored" data-anchor-id="how-many-of-the-suburbs-in-the-boston-data-set-bound-the-charles-river">10) How many of the suburbs in the Boston data set bound the Charles river?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(Boston<span class="sc">$</span>chas <span class="sc">==</span> <span class="dv">1</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 35</code></pre>
</div>
</div>
<ul>
<li>There is <span class="math inline">\(35\)</span> suburbs in the Boston data set bound the Charles river.</li>
</ul>
</section>
<section id="do-any-of-the-suburbs-of-boston-appear-to-have-particularly-high-crime-rates-tax-rates-pupil-teacher-ratios-comment-on-the-range-of-each-variable." class="level4">
<h4 class="anchored" data-anchor-id="do-any-of-the-suburbs-of-boston-appear-to-have-particularly-high-crime-rates-tax-rates-pupil-teacher-ratios-comment-on-the-range-of-each-variable.">11) Do any of the suburbs of Boston appear to have particularly high crime rates? Tax rates? Pupil-teacher ratios? Comment on the range of each variable.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">min</span>(Boston<span class="sc">$</span>crim), <span class="fu">max</span>(Boston<span class="sc">$</span>crim))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  0.00632 88.97620</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">min</span>(Boston<span class="sc">$</span>tax), <span class="fu">max</span>(Boston<span class="sc">$</span>tax))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 187 711</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">min</span>(Boston<span class="sc">$</span>ptratio), <span class="fu">max</span>(Boston<span class="sc">$</span>ptratio))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 12.6 22.0</code></pre>
</div>
</div>
<ul>
<li>The range of crime rates in Boston is <span class="math inline">\([0.00632, 88.9762]\)</span>, while the range of tax rates and pupil-teacher ratios are <span class="math inline">\([187,711]\)</span> and <span class="math inline">\([12.6,22.0]\)</span> respectively.</li>
</ul>
</section>
<section id="describe-the-distribution-of-pupil-teacher-ratio-among-the-towns-in-this-data-set-that-have-a-per-capita-crime-rate-larger-than-1.-how-does-it-differ-from-towns-that-have-a-per-capita-crime-rate-smaller-than-1" class="level4">
<h4 class="anchored" data-anchor-id="describe-the-distribution-of-pupil-teacher-ratio-among-the-towns-in-this-data-set-that-have-a-per-capita-crime-rate-larger-than-1.-how-does-it-differ-from-towns-that-have-a-per-capita-crime-rate-smaller-than-1">12) Describe the distribution of pupil-teacher ratio among the towns in this data set that have a per capita crime rate larger than 1. How does it differ from towns that have a per capita crime rate smaller than 1?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>highrate_crim <span class="ot">&lt;-</span> Boston[Boston<span class="sc">$</span>crim <span class="sc">&gt;</span> <span class="dv">1</span>,]</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>lowrate_crim<span class="ot">&lt;-</span> Boston[Boston<span class="sc">$</span>crim <span class="sc">&lt;=</span> <span class="dv">1</span>,]</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>stat_highrate_crim <span class="ot">&lt;-</span> highrate_crim <span class="sc">%&gt;%</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    mean_hc_ptra <span class="ot">&lt;-</span> <span class="fu">mean</span>(ptratio),</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>    median_hc_ptra<span class="ot">&lt;-</span><span class="fu">median</span>(ptratio),</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>    sd_hc_ptra<span class="ot">&lt;-</span> <span class="fu">median</span>(ptratio),</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>    min_hc_ptra <span class="ot">&lt;-</span> <span class="fu">min</span>(ptratio),</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    max_hc_ptra <span class="ot">&lt;-</span> <span class="fu">max</span>(ptratio)</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>stat_highrate_crim</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  mean_hc_ptra &lt;- mean(ptratio) median_hc_ptra &lt;- median(ptratio)
1                      19.29425                              20.2
  sd_hc_ptra &lt;- median(ptratio) min_hc_ptra &lt;- min(ptratio)
1                          20.2                        14.7
  max_hc_ptra &lt;- max(ptratio)
1                        21.2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>stat_lowrate_crim <span class="ot">&lt;-</span> lowrate_crim <span class="sc">%&gt;%</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    mean_lc_ptra <span class="ot">&lt;-</span> <span class="fu">mean</span>(ptratio),</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    median_lc_ptra <span class="ot">&lt;-</span> <span class="fu">median</span>(ptratio),</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    sd_lc_ptra <span class="ot">&lt;-</span> <span class="fu">median</span>(ptratio),</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    min_lc_ptra <span class="ot">&lt;-</span> <span class="fu">min</span>(ptratio),</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    max_lc_ptra <span class="ot">&lt;-</span> <span class="fu">max</span>(ptratio)</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>stat_lowrate_crim</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  mean_lc_ptra &lt;- mean(ptratio) median_lc_ptra &lt;- median(ptratio)
1                      18.01596                              18.3
  sd_lc_ptra &lt;- median(ptratio) min_lc_ptra &lt;- min(ptratio)
1                          18.3                        12.6
  max_lc_ptra &lt;- max(ptratio)
1                          22</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(highrate_crim<span class="sc">$</span>ptratio, <span class="at">main =</span> <span class="st">"High Crime Town"</span>,<span class="at">xlab=</span> <span class="st">"Pupil-Teacher-Ratio"</span>, <span class="at">col=</span><span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Weishan-HW1_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(lowrate_crim<span class="sc">$</span>ptratio, <span class="at">main =</span> <span class="st">"low Crime Town"</span>,<span class="at">xlab=</span> <span class="st">"Pupil-Teacher-Ratio"</span>, <span class="at">col=</span><span class="st">"green"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Weishan-HW1_files/figure-html/unnamed-chunk-11-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p>We can observe that the distribution of pupil- teacher ratio in the town with a high crime rate (crime rate &gt;1) is significantly different from that in low crime town (crime rate &lt;1). In high crime rate towns, the distribution is non-uniform and clustered around 20, with only few towns having a pupil-teacher ratio of 14 or 19.</p></li>
<li><p>In contrast, in low crime town, the distribution of pupil- teacher ratio is more inform and following an approximate normal distribution with a median around 18. There are more towns with low pupil-teacher ratior in low crime rate areas compares to high crime rate areas.</p></li>
<li><p>In conclusion, High crime rate towns may face a shortage of educational resources, while low crime rate towns have more adequate educational resourses.</p></li>
</ul>
</section>
<section id="writing-functions" class="level4">
<h4 class="anchored" data-anchor-id="writing-functions">Writing Functions</h4>
</section>
<section id="write-a-function-that-calculates-95-confidence-intervals-for-a-point-estimate.-the-function-should-be-called-my_ci.-when-called-with-my_ci2-0.2-the-function-should-print-out-the-95-ci-upper-bound-of-point-estimate-2-with-standard-error-0.2-is-2.392.-the-lower-bound-is-1.608." class="level4">
<h4 class="anchored" data-anchor-id="write-a-function-that-calculates-95-confidence-intervals-for-a-point-estimate.-the-function-should-be-called-my_ci.-when-called-with-my_ci2-0.2-the-function-should-print-out-the-95-ci-upper-bound-of-point-estimate-2-with-standard-error-0.2-is-2.392.-the-lower-bound-is-1.608.">13) Write a function that calculates 95% confidence intervals for a point estimate. The function should be called <code>my_CI</code>. When called with <code>my_CI(2, 0.2)</code>, the function should print out “The 95% CI upper bound of point estimate 2 with standard error 0.2 is 2.392. The lower bound is 1.608.”</h4>
</section>
<section id="note-the-function-should-take-a-point-estimate-and-its-standard-error-as-arguments.-you-may-use-the-formula-for-95-ci-point-estimate---1.96standard-error." class="level4">
<h4 class="anchored" data-anchor-id="note-the-function-should-take-a-point-estimate-and-its-standard-error-as-arguments.-you-may-use-the-formula-for-95-ci-point-estimate---1.96standard-error."><em>Note: The function should take a point estimate and its standard error as arguments. You may use the formula for 95% CI: point estimate +/- 1.96*standard error.</em></h4>
</section>
<section id="hint-pasting-text-in-r-can-be-done-with-paste-and-paste0" class="level4">
<h4 class="anchored" data-anchor-id="hint-pasting-text-in-r-can-be-done-with-paste-and-paste0"><em>Hint: Pasting text in R can be done with:</em> <code>paste()</code> <em>and</em> <code>paste0()</code></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>my_CI <span class="ot">&lt;-</span><span class="cf">function</span>( point_estimate, standard_error){</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>upper_bound <span class="ot">&lt;-</span> point_estimate <span class="sc">+</span> <span class="fl">1.96</span><span class="sc">*</span>standard_error </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>lower_bound <span class="ot">&lt;-</span> point_estimate <span class="sc">-</span> <span class="fl">1.96</span><span class="sc">*</span>standard_error </span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span>(<span class="fu">paste0</span>(<span class="st">"The 95% CI upper bound of point estimate 2 with standard error 0.2 is"</span>,upper_bound,<span class="st">", The lower bound is "</span>,low_bound,<span class="st">"."</span>))</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="fu">my_CI</span> (<span class="dv">2</span>, <span class="fl">0.2</span>)</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="create-a-new-function-called-my_ci2-that-does-that-same-thing-as-the-my_ci-function-but-outputs-a-vector-of-length-2-with-the-lower-and-upper-bound-of-the-confidence-interval-instead-of-printing-out-the-text.-use-this-to-find-the-95-confidence-interval-for-a-point-estimate-of-0-and-standard-error-0.4." class="level4">
<h4 class="anchored" data-anchor-id="create-a-new-function-called-my_ci2-that-does-that-same-thing-as-the-my_ci-function-but-outputs-a-vector-of-length-2-with-the-lower-and-upper-bound-of-the-confidence-interval-instead-of-printing-out-the-text.-use-this-to-find-the-95-confidence-interval-for-a-point-estimate-of-0-and-standard-error-0.4.">14) Create a new function called <code>my_CI2</code> that does that same thing as the <code>my_CI</code> function but outputs a vector of length 2 with the lower and upper bound of the confidence interval instead of printing out the text. Use this to find the 95% confidence interval for a point estimate of 0 and standard error 0.4.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>my_CI2 <span class="ot">&lt;-</span> <span class="cf">function</span>(point_estimate, standard_error) {</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  upper_bound <span class="ot">&lt;-</span> point_estimate <span class="sc">+</span> <span class="fl">1.96</span><span class="sc">*</span>standard_error</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  lower_bound <span class="ot">&lt;-</span> point_estimate <span class="sc">-</span> <span class="fl">1.96</span><span class="sc">*</span>standard_error </span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">c</span>(upper_bound,lower_bound))</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">my_CI2</span>(<span class="dv">0</span> , <span class="fl">0.4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  0.784 -0.784</code></pre>
</div>
</div>
<ul>
<li>The confidence interval for a point estimate of 0 and standard error 0.4 is <span class="math inline">\([0.784,-0.784]\)</span></li>
</ul>
</section>
<section id="update-the-my_ci2-function-to-take-any-confidence-level-instead-of-only-95.-call-the-new-function-my_ci3.-you-should-add-an-argument-to-your-function-for-confidence-level." class="level4">
<h4 class="anchored" data-anchor-id="update-the-my_ci2-function-to-take-any-confidence-level-instead-of-only-95.-call-the-new-function-my_ci3.-you-should-add-an-argument-to-your-function-for-confidence-level.">15) Update the <code>my_CI2</code> function to take any confidence level instead of only 95%. Call the new function <code>my_CI3</code>. You should add an argument to your function for confidence level.</h4>
</section>
<section id="hint-use-the-qnorm-function-to-find-the-appropriate-z-value.-for-example-for-a-95-confidence-interval-using-qnorm0.975-gives-approximately-1.96." class="level4">
<h4 class="anchored" data-anchor-id="hint-use-the-qnorm-function-to-find-the-appropriate-z-value.-for-example-for-a-95-confidence-interval-using-qnorm0.975-gives-approximately-1.96."><em>Hint: Use the</em> <code>qnorm</code> <em>function to find the appropriate z-value. For example, for a 95% confidence interval, using</em> <code>qnorm(0.975)</code> <em>gives approximately 1.96.</em></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>my_CI3 <span class="ot">&lt;-</span> <span class="cf">function</span>(point_estimate, standard_error, confidence_level){</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  z <span class="ot">&lt;-</span> <span class="fu">qnorm</span>(<span class="dv">1</span><span class="sc">-</span> (<span class="dv">1</span><span class="sc">-</span>confidence_level)<span class="sc">/</span><span class="dv">2</span>)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  upper_bound <span class="ot">&lt;-</span> point_estimate <span class="sc">+</span> z<span class="sc">*</span>standard_error</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  lower_bound <span class="ot">&lt;-</span> point_estimate <span class="sc">-</span> z<span class="sc">*</span>standard_error</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">c</span>(upper_bound,lower_bound))</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="fu">my_CI3</span>(<span class="dv">0</span>,<span class="fl">0.4</span>,<span class="fl">0.9</span>) <span class="co">#test with a 90% confidence interval </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  0.6579415 -0.6579415</code></pre>
</div>
</div>
</section>
<section id="without-hardcoding-any-numbers-in-the-code-find-a-99-confidence-interval-for-ethnic-heterogeneity-in-the-angell-dataset.-find-the-standard-error-by-dividing-the-standard-deviation-by-the-square-root-of-the-sample-size." class="level4">
<h4 class="anchored" data-anchor-id="without-hardcoding-any-numbers-in-the-code-find-a-99-confidence-interval-for-ethnic-heterogeneity-in-the-angell-dataset.-find-the-standard-error-by-dividing-the-standard-deviation-by-the-square-root-of-the-sample-size.">16) Without hardcoding any numbers in the code, find a 99% confidence interval for Ethnic Heterogeneity in the Angell dataset. Find the standard error by dividing the standard deviation by the square root of the sample size.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a> mean_ethhet <span class="ot">&lt;-</span> <span class="fu">mean</span>(angell_stata<span class="sc">$</span>ethhet)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a> se_ethhet <span class="ot">&lt;-</span> <span class="fu">sd</span>(angell_stata<span class="sc">$</span>ethhet)<span class="sc">/</span><span class="fu">sqrt</span>(<span class="fu">nrow</span>(angell_stata))</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>my_CI_ethhet <span class="ot">&lt;-</span> <span class="cf">function</span>(point_estimate, se_ethhet,confidence_level){</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>  z <span class="ot">&lt;-</span> <span class="fu">qnorm</span>(<span class="dv">1</span><span class="sc">-</span>(<span class="dv">1</span><span class="sc">-</span>confidence_level)<span class="sc">/</span><span class="dv">2</span>)</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>  upper_bound <span class="ot">&lt;-</span> (mean_ethhet <span class="sc">+</span> z<span class="sc">*</span>se_ethhet)</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>  lower_bound <span class="ot">&lt;-</span> (mean_ethhet <span class="sc">-</span> z<span class="sc">*</span>se_ethhet)</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">c</span>(upper_bound,lower_bound)) </span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a><span class="fu">my_CI_ethhet</span>(mean_ethhet,se_ethhet,<span class="fl">0.99</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 39.38993 23.35425</code></pre>
</div>
</div>
<p>The 99% confidence interval for Ethnic Heterogeneity in the Angell dataset is <span class="math inline">\([39.38993, 23.35425]\)</span></p>
</section>
<section id="write-a-function-that-you-can-apply-to-the-angell-dataset-to-get-95-confidence-intervals.-the-function-should-take-one-argument-a-vector.-use-if-else-statements-to-output-na-and-avoid-error-messages-if-the-column-in-the-data-frame-is-not-numeric-or-logical." class="level4">
<h4 class="anchored" data-anchor-id="write-a-function-that-you-can-apply-to-the-angell-dataset-to-get-95-confidence-intervals.-the-function-should-take-one-argument-a-vector.-use-if-else-statements-to-output-na-and-avoid-error-messages-if-the-column-in-the-data-frame-is-not-numeric-or-logical.">17) Write a function that you can <code>apply</code> to the Angell dataset to get 95% confidence intervals. The function should take one argument: a vector. Use if-else statements to output NA and avoid error messages if the column in the data frame is not numeric or logical.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>my_CI4 <span class="ot">&lt;-</span> <span class="cf">function</span>(vector){</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">is.numeric</span>(vector) <span class="sc">|</span> <span class="fu">is.logical</span>(vector)) {</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>    mean_vector <span class="ot">&lt;-</span> <span class="fu">mean</span>(vector)</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>     se_vector <span class="ot">&lt;-</span> <span class="fu">sd</span>(vector)<span class="sc">/</span><span class="fu">sqrt</span>(<span class="fu">length</span>(vector))</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>     z <span class="ot">&lt;-</span> <span class="fu">qnorm</span>(<span class="dv">1</span><span class="sc">-</span>(<span class="dv">1</span><span class="fl">-0.95</span>)<span class="sc">/</span><span class="dv">2</span>)</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>     upper_bound <span class="ot">&lt;-</span> (mean_vector <span class="sc">+</span> z<span class="sc">*</span>se_vector)</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>     lower_bound <span class="ot">&lt;-</span> (mean_vector <span class="sc">-</span> z<span class="sc">*</span>se_vector)</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>     <span class="fu">return</span> (<span class="fu">c</span>(upper_bound,lower_bound)) </span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> {</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>     <span class="fu">return</span> (<span class="cn">NA</span>)</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(angell_stata, my_CI4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$city
[1] NA

$morint
[1] 12.26758 10.13242

$ethhet
[1] 37.47292 25.27127

$geomob
[1] 30.52347 24.67187

$region
[1] NA</code></pre>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>